<head>
<style>
*{margin:0;padding:0;}
.embed-container{position:relative;height:100vh;overflow:hidden;}
.embed-container iframe, .embed-container object, .embed-container embed {position:absolute;top:0;left:0;width:100%;height: 100%;}
.logo{ position:absolute;top:20px;left:20px;}
html{overflow:scroll;}
::-webkit-scrollbar{width:0px;background:transparent;}
    </style>
  </head>

  <body>
    <div class="embed-container">
      <div id="player"></div>
    </div>
    <script>
  var urlParams = new URLSearchParams(window.location.search);
  var SETTINGS = {
    playlist_id: urlParams.get('playlist') || 'PL291D6ScLmyLL7lzp9oeHsQEffSPqrUzA',
    autoplay: 1,
    loop: 1,
    index: 0,
    startSeconds: 0,
  };
  var videoDurations = [27, 1156, 31, 59, 27, 813, 31, 236, 27, 839, 186, 34, 27, 1948, 31, 31, 596, 47, 50, 27, 1428, 370, 61, 27, 6180];

  var tag = document.createElement('script');
  tag.src = "https://www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  var player;

  function onYouTubeIframeAPIReady() {
    player = new YT.Player('player', {
      height: '540',
      width: '960',
      playerVars: {
        version: 3,
        autoplay: 0,
        loop: SETTINGS.loop,
        rel: 0
      },
      events: {
        'onReady': onPlayerReady,
        'onStateChange': onPlayerStateChange,
      },
    });
  }

  function onPlayerReady(event) {
    player.loadPlaylist({
      listType: 'playlist',
      list: SETTINGS.playlist_id,
      index: 0,
      autoplay: 0
    });

    setTimeout(syncWithUTCTime, 2000);
  }

var totalDuration = videoDurations.reduce((a, b) => a + b, 0);

const START_EPOCH = 1704067200;

function syncWithUTCTime() {
  var elapsed = Math.floor(Date.now() / 1000) - START_EPOCH;

  var cycleTime = elapsed % totalDuration;

  var videoIndex = 0;
  var timeInVideo = cycleTime;
  for (let i = 0; i < videoDurations.length; i++) {
    if (timeInVideo < videoDurations[i]) {
      videoIndex = i;
      break;
    } else {
      timeInVideo -= videoDurations[i];
    }
  }

  player.playVideoAt(videoIndex);

  setTimeout(() => {
    player.seekTo(timeInVideo, true);
  }, 2000);
}


  function onPlayerStateChange(event) {
	  player.setVolume(10);
    if (event.data == YT.PlayerState.ENDED) {
      syncWithUTCTime();
    }
  }
</script>


	<span class="logo"><img src="thistv2hdDOG.png" width="100%" height="100%"></span>
  </body>

</html>
